{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 6, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 92, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Redmi/Projects/bank-app%20frontend/src/app/api/auth/register/route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from 'next/server';\r\nimport bcrypt from 'bcryptjs';\r\nimport jwt from 'jsonwebtoken';\r\n\r\n// Временное хранилище (в реальном приложении используйте базу данных)\r\nconst users: any[] = [];\r\n\r\nexport async function POST(request: NextRequest) {\r\n  try {\r\n    const { email, password, firstName, lastName, phone } = await request.json();\r\n\r\n    // Валидация\r\n    if (!email || !password || !firstName || !lastName) {\r\n      return NextResponse.json(\r\n        { error: 'Все поля обязательны для заполнения' },\r\n        { status: 400 }\r\n      );\r\n    }\r\n\r\n    if (password.length < 6) {\r\n      return NextResponse.json(\r\n        { error: 'Пароль должен содержать не менее 6 символов' },\r\n        { status: 400 }\r\n      );\r\n    }\r\n\r\n    // Проверка, существует ли пользователь\r\n    const existingUser = users.find(user => user.email === email);\r\n    if (existingUser) {\r\n      return NextResponse.json(\r\n        { error: 'Пользователь с таким email уже существует' },\r\n        { status: 409 }\r\n      );\r\n    }\r\n\r\n    // Хеширование пароля\r\n    const hashedPassword = await bcrypt.hash(password, 12);\r\n\r\n    // Создание пользователя\r\n    const user = {\r\n      id: Date.now().toString(),\r\n      email,\r\n      password: hashedPassword,\r\n      firstName,\r\n      lastName,\r\n      phone,\r\n      createdAt: new Date()\r\n    };\r\n\r\n    users.push(user);\r\n\r\n    // Создание JWT токена\r\n    const token = jwt.sign(\r\n      { userId: user.id, email: user.email },\r\n      process.env.JWT_SECRET || 'your-secret-key',\r\n      { expiresIn: '7d' }\r\n    );\r\n\r\n    // Возвращаем данные пользователя (без пароля)\r\n    const userResponse = {\r\n      id: user.id,\r\n      email: user.email,\r\n      firstName: user.firstName,\r\n      lastName: user.lastName,\r\n      phone: user.phone\r\n    };\r\n\r\n    return NextResponse.json({\r\n      user: userResponse,\r\n      token,\r\n      message: 'Регистрация успешна!'\r\n    });\r\n\r\n  } catch (error) {\r\n    console.error('Registration error:', error);\r\n    return NextResponse.json(\r\n      { error: 'Ошибка сервера' },\r\n      { status: 500 }\r\n    );\r\n  }\r\n}"],"names":[],"mappings":";;;AAAA;AACA;AACA;;;;AAEA,sEAAsE;AACtE,MAAM,QAAe,EAAE;AAEhB,eAAe,KAAK,OAAoB;IAC7C,IAAI;QACF,MAAM,EAAE,KAAK,EAAE,QAAQ,EAAE,SAAS,EAAE,QAAQ,EAAE,KAAK,EAAE,GAAG,MAAM,QAAQ,IAAI;QAE1E,YAAY;QACZ,IAAI,CAAC,SAAS,CAAC,YAAY,CAAC,aAAa,CAAC,UAAU;YAClD,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CACtB;gBAAE,OAAO;YAAsC,GAC/C;gBAAE,QAAQ;YAAI;QAElB;QAEA,IAAI,SAAS,MAAM,GAAG,GAAG;YACvB,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CACtB;gBAAE,OAAO;YAA8C,GACvD;gBAAE,QAAQ;YAAI;QAElB;QAEA,uCAAuC;QACvC,MAAM,eAAe,MAAM,IAAI,CAAC,CAAA,OAAQ,KAAK,KAAK,KAAK;QACvD,IAAI,cAAc;YAChB,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CACtB;gBAAE,OAAO;YAA4C,GACrD;gBAAE,QAAQ;YAAI;QAElB;QAEA,qBAAqB;QACrB,MAAM,iBAAiB,MAAM,mIAAA,CAAA,UAAM,CAAC,IAAI,CAAC,UAAU;QAEnD,wBAAwB;QACxB,MAAM,OAAO;YACX,IAAI,KAAK,GAAG,GAAG,QAAQ;YACvB;YACA,UAAU;YACV;YACA;YACA;YACA,WAAW,IAAI;QACjB;QAEA,MAAM,IAAI,CAAC;QAEX,sBAAsB;QACtB,MAAM,QAAQ,uIAAA,CAAA,UAAG,CAAC,IAAI,CACpB;YAAE,QAAQ,KAAK,EAAE;YAAE,OAAO,KAAK,KAAK;QAAC,GACrC,QAAQ,GAAG,CAAC,UAAU,IAAI,mBAC1B;YAAE,WAAW;QAAK;QAGpB,8CAA8C;QAC9C,MAAM,eAAe;YACnB,IAAI,KAAK,EAAE;YACX,OAAO,KAAK,KAAK;YACjB,WAAW,KAAK,SAAS;YACzB,UAAU,KAAK,QAAQ;YACvB,OAAO,KAAK,KAAK;QACnB;QAEA,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CAAC;YACvB,MAAM;YACN;YACA,SAAS;QACX;IAEF,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,uBAAuB;QACrC,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CACtB;YAAE,OAAO;QAAiB,GAC1B;YAAE,QAAQ;QAAI;IAElB;AACF","debugId":null}}]
}