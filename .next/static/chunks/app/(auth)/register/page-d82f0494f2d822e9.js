(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[678],{83:(e,t,r)=>{"use strict";r.d(t,{AuthProvider:()=>u,A:()=>c});var s=r(5155),n=r(2115),a=r(5695);function i(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)e[s]=r[s]}return e}var o=function e(t,r){function s(e,s,n){if("undefined"!=typeof document){"number"==typeof(n=i({},r,n)).expires&&(n.expires=new Date(Date.now()+864e5*n.expires)),n.expires&&(n.expires=n.expires.toUTCString()),e=encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var a="";for(var o in n)n[o]&&(a+="; "+o,!0!==n[o]&&(a+="="+n[o].split(";")[0]));return document.cookie=e+"="+t.write(s,e)+a}}return Object.create({set:s,get:function(e){if("undefined"!=typeof document&&(!arguments.length||e)){for(var r=document.cookie?document.cookie.split("; "):[],s={},n=0;n<r.length;n++){var a=r[n].split("="),i=a.slice(1).join("=");try{var o=decodeURIComponent(a[0]);if(s[o]=t.read(i,o),e===o)break}catch(e){}}return e?s[e]:s}},remove:function(e,t){s(e,"",i({},t,{expires:-1}))},withAttributes:function(t){return e(this.converter,i({},this.attributes,t))},withConverter:function(t){return e(i({},this.converter,t),this.attributes)}},{attributes:{value:Object.freeze(r)},converter:{value:Object.freeze(t)}})}({read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"});let l=(0,n.createContext)(void 0);function u(e){let{children:t}=e,[r,i]=(0,n.useState)(null),u=(0,a.useRouter)();(0,n.useEffect)(()=>{let e=o.get("authToken"),t=o.get("userData");if(e&&t)try{i(JSON.parse(t))}catch(e){console.error("Error parsing user data:",e),c()}},[]);let c=()=>{i(null),o.remove("authToken"),o.remove("userData"),u.push("/")};return(0,s.jsx)(l.Provider,{value:{user:r,login:(e,t)=>{i(e),o.set("authToken",t,{expires:7}),o.set("userData",JSON.stringify(e),{expires:7}),u.push("/dashboard")},logout:c,isAuthenticated:!!r},children:t})}function c(){let e=(0,n.useContext)(l);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},152:(e,t,r)=>{Promise.resolve().then(r.bind(r,4712))},4640:e=>{e.exports={container:"register_container__Efe6m",content:"register_content__ChJqZ",header:"register_header__G6I17",fadeInUp:"register_fadeInUp__J3qyi",title:"register_title__DsoEt",subtitle:"register_subtitle__Kv80_",form:"register_form__n0G5m",slideInUp:"register_slideInUp__SCjdm",formGroup:"register_formGroup__kX3cv",label:"register_label__bBbLo",input:"register_input__zNuWY",submitButton:"register_submitButton__s4seo",loginPrompt:"register_loginPrompt__0_uvi",fadeIn:"register_fadeIn__KkkpY",loginLink:"register_loginLink__9bw9X"}},4712:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>c});var s=r(5155),n=r(2115),a=r(6874),i=r.n(a),o=r(83),l=r(4640),u=r.n(l);function c(){let[e,t]=(0,n.useState)({email:"",password:"",phone:"",firstName:"",lastName:""}),[r,a]=(0,n.useState)(!1),[l,c]=(0,n.useState)(""),{login:d}=(0,o.A)(),p=async t=>{t.preventDefault(),a(!0),c("");try{let t=await fetch("/api/auth/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),r=await t.json();if(!t.ok)throw Error(r.error||"Ошибка регистрации");d(r.user,r.token)}catch(e){c(e.message)}finally{a(!1)}},m=r=>{t({...e,[r.target.name]:r.target.value})};return(0,s.jsx)("div",{className:u().container,children:(0,s.jsxs)("div",{className:u().content,children:[(0,s.jsxs)("div",{className:u().header,children:[(0,s.jsx)("h1",{className:u().title,children:"Добро пожаловать в V-банк"}),(0,s.jsx)("p",{className:u().subtitle,children:"Создайте аккаунт для доступа ко всем возможностям"})]}),(0,s.jsxs)("form",{className:u().form,onSubmit:p,children:[l&&(0,s.jsx)("div",{style:{color:"#ff4757",backgroundColor:"rgba(255, 71, 87, 0.1)",padding:"12px",borderRadius:"8px",marginBottom:"20px",textAlign:"center"},children:l}),(0,s.jsxs)("div",{className:u().formGroup,children:[(0,s.jsx)("label",{className:u().label,children:"Имя"}),(0,s.jsx)("input",{type:"text",name:"firstName",value:e.firstName,onChange:m,className:u().input,placeholder:"Введите ваше имя",required:!0,disabled:r})]}),(0,s.jsxs)("div",{className:u().formGroup,children:[(0,s.jsx)("label",{className:u().label,children:"Фамилия"}),(0,s.jsx)("input",{type:"text",name:"lastName",value:e.lastName,onChange:m,className:u().input,placeholder:"Введите вашу фамилию",required:!0,disabled:r})]}),(0,s.jsxs)("div",{className:u().formGroup,children:[(0,s.jsx)("label",{className:u().label,children:"Email"}),(0,s.jsx)("input",{type:"email",name:"email",value:e.email,onChange:m,className:u().input,placeholder:"your@email.com",required:!0,disabled:r})]}),(0,s.jsxs)("div",{className:u().formGroup,children:[(0,s.jsx)("label",{className:u().label,children:"Телефон"}),(0,s.jsx)("input",{type:"tel",name:"phone",value:e.phone,onChange:m,className:u().input,placeholder:"+7 (XXX) XXX-XX-XX",required:!0,disabled:r})]}),(0,s.jsxs)("div",{className:u().formGroup,children:[(0,s.jsx)("label",{className:u().label,children:"Пароль"}),(0,s.jsx)("input",{type:"password",name:"password",value:e.password,onChange:m,className:u().input,placeholder:"Не менее 6 символов",minLength:6,required:!0,disabled:r})]}),(0,s.jsx)("button",{type:"submit",className:u().submitButton,disabled:r,children:r?"Регистрация...":"Создать аккаунт"}),(0,s.jsxs)("div",{className:u().loginPrompt,children:["Уже есть аккаунт?",(0,s.jsx)(i(),{href:"/login",className:u().loginLink,children:"Войти"})]})]})]})})}},5695:(e,t,r)=>{"use strict";var s=r(8999);r.o(s,"useRouter")&&r.d(t,{useRouter:function(){return s.useRouter}})}},e=>{var t=t=>e(e.s=t);e.O(0,[331,874,441,684,358],()=>t(152)),_N_E=e.O()}]);